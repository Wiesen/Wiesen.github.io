+++
date = "2017-02-15T21:31:33+08:00"
draft = true
title = "2018年实习面试总结"

tags = ["interview"]
+++

百度上海（商务搜索商品推广部门）
---
1. 一面

	1. 自我介绍+项目经历（10+分钟）

	1. 基础知识

		- 定义一个类的析构函数为虚函数的目的是什么？
		- 如果一个类不是作为基类，那么定义其析构函数为虚函数有什么问题？
		- C++是以虚函数来实现多态，C如何实现多态（**使用了哪种设计模式**）？（函数指针参数，定义参数类型和返回值类型）	
		- 类的静态数据成员有什么特点？（内存分配及声明周期，从属于实例还是类）
		- 静态成员函数有什么特点？（从属于实例还是对象，访问限制）

	3. 编程（**动手编码前讲清楚自己的思路**）
	
		- 给定一棵普通二叉树且每个结点含一个int值，然后给定int target值，打印出所有从根结点到叶子结点等于给定 target 值的路径。（递归回溯）
		- 单向无环链表倒数第k个结点。（k可能小于等于0）
 
	4. 开放题（**常考海量数据问题，一般解决办法为：hash，partition，归并，B+树**）

		问题：给定 10G 个数，只有 2G 内存，找出中位数。

		解：**先 hash 分桶（如5个）进行粗粒度排序**，然后读取 4G~6G 的数据入内存**进行划分 partition**，找出中位数。

1. 二面

	1. 自我介绍+项目经历（30分钟）

        期间被问到交通系统出现死锁怎么办，没答出来。后来仔细想想其实是在考察**反应能力、应变能力和知识迁移能力**，间接地考察OS中的调度问题和死锁问题。

        调度算法：
        - 分为抢占式和非抢占式。可抢占式调度可有效减少等待时间和响应时间，但会带来较大的其他管理开销，使得吞吐量等的性能指标比不可抢占式调度要低
        - 常见的调度算法包括：先来先服务（FCFS，first come first serve），最短作业优先（SJF，shortest job first），时间片轮转（RR，round robin），最高响应比优先（HRRF，hightest response ratio first）
        
        死锁：      
        - 定义：两个或多个进程无限地等待一个事件，而该事件只能由这些等待进程之一产生
        - 原因：互斥，占有并等待，非抢占，循环等待
        - 死锁处理办法：死锁预防，死锁避免，死锁检测和恢复，死锁忽略（认为死锁不可能在系统内发生）
            - 死锁预防：确保上述4个必要条件中至少一个不成立（副作用是低设备使用率和系统吞吐率 ）
            - 死锁避免：动态地检测资源分配状态以确保循环等待条件不可能成立（前提：需要事先了解进程使用资源的情况） 
        
	2. C++基础知识

		- C++虚函数的作用什么？
		- C++如何实现虚函数？
		- 构造函数和析构函数可以是虚函数吗？

	3. 编程

		1. 求无序数组中的 TOP K 个元素
			- **一个教训：做题目前一定要先认真审题**，后续回想起来自己审错题目了，输出的是前k小的元素
			- 另外做题阐述思路时没有必要马上说出所谓的最优解，**重要的是对问题的分析能力**
		2. https://leetcode.com/problems/trapping-rain-water/
			- 第二道题一开始没理解面试官的意思，反复讲了10分钟，最后面试官没辙了给我发了个题图……我想了十多分钟后面试官表示时间不够了让我讲思路就够了【蒟蒻...
			- 我一开始想的方法是左右检索非零的栅，然后取min，对中间的栅做一个类似于俄罗斯方块的消除操作（比min小的可以储水，比min大的则减去min），如何反复，直到左右相等则完成
			- 最后面试官说这个思路有点问题，然后告知这是leetcode上的题目，存在O(N)的解法，自己回去看看
			- 具体就是，将问题转化为每个 bar（array[i]）能trap多少水，然后将所有的加起来即可。而对于每个 array[i] 能trap多少水取决于其左右两边（不要求相邻）bar height的较小值与array[i]的差值，亦即是：`volume[i] = [min(left[i], right[i]) - array[i]] * 1`（1为bar的宽度）
			- 在上述思路下，分别从左到右和从右到左遍历 array 生成 left 和 right 数组。然后再遍历一次 array 计算 volume 即可。当然这种方法还能继续优化，用两个指针分别从左右开始扫（类似快速排序里 partition 的扫描），可以做到单次遍历。
			- 看了不少blog，了解到这个方法算是一种常见的技巧，从两边各扫描一次得到我们需要维护的变量，**通常适用于当前元素需要两边元素来决定的问题**。

阿里云（分布式存储部门）
---

1. 一面

    1. 自我介绍

    2. 介绍一个你最了解的项目（注意说的时候别说自己半懂不懂的给自己挖坑）

        - 项目代码量多少
        - 这个项目你如果一直做的话，大概需要多长时间，为什么需要这么长时间（解释自己遇到的问题、原因和解决办法）
        - 解释一下 raft 协议的内容，怎么保证数据一致性，为什么需要 leader election 这个步骤
        - 之后我说 election timer 定时器必须足够随机，这里给自己挖坑了，被追问怎么才算足够随机、为什么、怎么确定随机数值
        - 你还读过什么关于分布式的论文

    3. 基础知识
        
        - 客套：你计算机里面哪门课学的比较好（注意别给自己挖坑）
        - OS：进程和线程的区别
        - 网络：TCP和UDP的区别
        - C/C++：struct结构体在C/C++之中的区别是什么

    4. 聊天

        - 平时喜欢做什么
        - 看什么书（APUE/UNP/算法/C/C++...）
        - 本科/研究生时在同学当中你属于什么类型


网易互娱（平台开发服务器方向）
---

1. 一面（三个面试官同时面，视频只能看到自己看不到别人，跟受审一样）

    1. 自我介绍

        问我是不是主要是做Linux开发，我说是，成功挖坟

    2. Linux

        - 给定一个目录，计算该目录下所有.c文件的行数，使用 Linux shell 完成（一次暴击重伤）：cat dir/*.c | wc -l
        - 如何查看一个文件被哪些进程打开了（二次濒临死亡）：lsof
        - 大端小端是什么

    4. C/C++
        
        - static 的含义
        - `const int *p 和 int* const p` 的区别
        - `char *p = "hello", char p[] = "hello"`，sizeof的值分别是多少
        - 堆和栈的区别
        - C/C++ 函数中的变长参数是如何实现的
        - strcpy 函数有什么问题，这个问题会导致怎样的结果
        - STL 中的 map 是用什么实现的，map 和 hash_map 的区别是什么，根据什么情况选择使用哪种map

    5. 算法

        - 求一个整数的平方根（三次暴击完全gg）：二分即可
        - 给定一个文件，长度是未知的，要求一次遍历，然后求随便一行被输出的概率（完全没理解题意，四次暴击鞭尸）：蓄水池采样
        - n个元素求前k小个元素：时间复杂度答错了，最好的**时间复杂度应该是O(N)**

    6. 基础

        - TCP和UDP的区别
        - 解释一下TCP三次握手，为什么不能二次或者四次
	        - 这个问题的本质是：信道不可靠, 但是通信双发需要就某个问题达成一致. 
		        - 而要解决这个问题, 无论你在消息中包含什么信息, 三次通信是理论上的最小值. 
		        - 所以三次握手不是TCP本身的要求, 而是为了满足"在不可靠信道上可靠地传输信息"这一需求所导致的.
	        - 三次握手的目的：为了防止已失效的连接请求报文段突然又传送到了服务端，因而产生错误（解决“网络中存在延迟的重复分组”的问题）
		        1. client发出的第一个连接请求报文段并没有丢失，而是在某个网络结点长时间的滞留了，以致延误到连接释放以后的某个时间才到达server。本来这是一个早已失效的报文段
	        	2. 但server收到此失效的连接请求报文段后，就误认为是client再次发出的一个新的连接请求。于是就向client发出确认报文段，同意建立连接。
	        	3. 由于现在client并没有发出建立连接的请求，因此不会理睬server的确认，也不会向server发送数据。
	        	4. server却以为新的运输连接已经建立，并一直等待client发来数据。这样，server的很多资源就白白浪费掉了
        - 解释一下滑动窗口的原理，什么时候会滑动
        - TCP有什么定时器
	        1. 重传定时器
	        2. 坚持定四期
	        3. 保活定时器
	        3. 2MSL定时器

    7. 完结，一行代码没写出来，最后说了句“如果通过了三个工作日内会通知”，翻译过来意思就是“赶紧去投别的吧咱们这你gg了”

阿里云（飞天）
---

1. 一面

	1. 项目

		- 解释一下 raft 协议的内容，怎么保证数据一致性：其中没长脑子，又说了 election timer 定时器必须足够随机，再次挖坑
		- 自动驾驶系统项目是什么

	2. 算法

		- 将BST原地变换为有序单链表：对指针操作不够熟练，导致递归返回赋值时链表断掉
		- 面试官好人，代码错了还是把我过了

2. 二面

	1. 算法（直接gg）

		- 一个job由多个task组成，每个task运行一定时间，task之间存在依赖关系。如：A: 2，B: 1，C: 10，D: 8，其中，A->B，A->D。求运行完所有task最少需要多少时间。

网易互联网（分布式存储）
---

1. 一面

	1. 项目

		1. 讲一下 raft 协议的基本组成，每个机器有哪几种状态
		2. raft 协议如何保证数据一致性，比如一个 leader 崩溃重启后，raft 如何应对
			1. 举例子能力不够，逻辑性不够强，并且语言组织不够简练
			2. 
		3. 实现 key/value storage system 时，为什么读也要经过 raft
			1. 一开始没完全理解面试官的问题，**导致沟通出现问题**；
			2. **后面自己理解出现偏差**，对 storage system 的原理不够深入了解，并且与面试官吵了起来；
			3. raft 的目的是要保证数据一致性，读并不修改数据一致性，因此**读只需要从 leader 中读取即可（哪怕这个 leader 是 network partition）**，但不能从 follower 中读取**（因为 follower 的数据可能还未 catch up，如非多数派节点）**
			4. 就算是并发情况下也不会有问题，由于写必须经过 raft 来完成，因此后续的读不会读出未经过 raft 的写，不会出现读写不一致问题**（RPC 读写是阻塞的，RPC写还没返回时，则证明写还没完成，因此读也就无所谓不一致）**
			5. **以上全错，面试官错了**
		5. 你有哪些项目是与人合作完成的
			1. 当时心态已经失衡了，因此只是简单提了一下其余项目的分工和自己的职责
			2. 应该简洁阐述项目来源和介绍，然后阐述自己的职责，以及如何组织、分工和协调，自己又完成了什么内容，分工协调时遇到了什么问题，最后如何解决的

	2. 基础

		1. **C 与 C++ 的区别是什么**，以你平时写代码的经验来讲讲
		2. STL 的算法你常用什么，讲一下 sort 函数的实现（gg，刚好没看过，不过觉得自己说的差不多一样了）

腾讯（QQ后台）
---

1. 一面

	1. 基础
		1. N 从 0 开始，判断第 N bit 是不是 1：
			1. 太紧张，写了很多冗余的语句（除法和求余），并且当发生错误时设置了错误标志但没有返回值！
			2. `sizeof()` 返回的是字节byte数！而不是位bit数！
			
					// N从0开始，判断第N bit是不是1
					int erron = 0;
					bool NthBitIsOne(unsigned long str[k], int N) {
					    if (N > k * sizeof(unsigned long) * 8 || N < 0) {
					        erron = 1;
					        return false; // !谨记返回
					    }
					    return str[N/(sizeof(unsigned long) * 8) + ((unsigned long)1 << (N%(sizeof(unsigned long) * 8)))];
					}

		3. 指针操作
		
				// 32位，小端地址
			    char b[8] = {0};
			    char *a = b;
			    int *c = (int*)b;
			    short *s = (short*)b;
			    *s = 1;
			    cout << *a << ' ' << *c << endl;
			    *s = -1;
			    cout << *a << ' ' << *c << endl;
			    *s = 256;
			    cout << *a << ' ' << *c << endl;

		4. 字符串常量数组大小计算

			    char *m[] = {"abc", "abcdfe"};
			    cout << sizeof(m) << endl;
			    char (*n)[] = {"abcsfd", "abcda"};
			    cout << sizeof(n) << endl;

		5. **频繁调用malloc会发生什么问题？**当32系统上的物理内存小于4g呢？如果只申请而不写呢？：不懂，回答错误
			3. 当主机物理内存能满足最小要求时，**只调用malloc而不写入，会被编译器或者系统优化掉，永远只获取某一页的地址**
		6. **mmap()有什么用？**：不够熟悉，没怎么用过，回答错误
			1. 
	7. 算法设计
		1.  QQ后台登录，登录量为60w/minute，一共有10亿（1G）个用户，将5分钟内重复登录的用户拒绝其登录请求，其中用户ID无法完全放入内存，设计一种数据结构
			1.  5分钟内最大用户登录数量为：60*5=300w，可以放入内存
			2.  利用 LRU cache 存储5分钟内登录的用户ID：map（rb-tree in O(logN) search，hashtable in O(1) search） + double linked list（in O(1) update）
				1. 双向链表用于存储数据结点，并且它是按照结点最近被使用的时间来存储的
				2. 使用哈希表可以让我们在O(1)的时间找到想要访问的结点， 或者返回未找到
				3. 当未找到结点时，即可将新的数据结点放至双向链表头部
				4. 当找到节点时，需要将数据结点进行更新，此时将该结点从链表中取出（此时双向链表的优势体现了），然后放至链表头部
				5. 当未找到结点且我们的Cache满了， 需要替换掉的就是双向链表中最后的那个结点(不是尾结点，头尾结点不存储实际内容)


2. 二面

	1. OS：64位的OS只有3g物理内存，一个进程想要申请4g的内存可以吗？
		1. **只申请不写入：不分配实际内存，仅分配虚拟内存地址**
		2. 写入：通过 swap() 实现
	2. 网络：讲一下从浏览器中输入 www.qq.com 后，浏览器负责做了什么，以及整个工作流程
		1. DNS-HTTP-TCP-IP-PPP
	3. HTTP：如果我在1分钟后再次输入同一个网址，浏览器会做什么？**除了缓存呢？**
		1. ？
	4. TCP：HTTP要求close session时，TCP如何断开链接？画出四次分手的流程图和状态转换
		1. 
	5. 算法：一个单执行流操作系统，每秒执行一次CheckTimer()，其中有一个注册定时器函数Register()可用于向系统注册定时函数，一个获取当前时间的函数Gettime()，设计一种数据结构和算法以最低的时间复杂度实现该过程，不考虑函数的执行时间
		1. 编码前要做好需求和情景分析：	
		2. 编码时注意细节：
		3. **数据结构：堆**


阿里（搜索）
---

1. 一面

	1. C/C++：类和对象的区别？指针和引用的区别？
		1. **语言组织不要乱！**想好再说！不要重复着同样一句话和支支吾吾！
		2. **指针和引用的内存占用区别**
	2. OS：做过嵌入式的话了解OS吗？OS是如何管理内存的？一个进程的空间地址是如何组织的？进程调用`malloc()`申请很大的空间会怎样？如果进程对申请到的空间进行写入，OS是如何为进程分配物理内存的？进程和线程的区别是什么？
		1. 分段分页内存管理：分段是为了向进程提供虚拟的连续内存地址；分页是为了向进程提供庞大的虚拟内存空间
		2. **触发缺页异常**（没有回答出），OS进入内核态，然后为进程分配物理内存页，把线性地址前若干位作为页号，余下位作为页内偏移地址，寻址物理内存
	3. 写代码：
		1. `char arr = "AAA"`；后面的字符串占多少空间
		2. 实现 `char* strcpy(char* dest, char* src)`，不能调用库函数
		3. 给定两个有序链表，把他们合并为一个有序列表；把`main`函数补充完整；手动link太麻烦，给你两个数组把它们转换为链表；用顺序的方式把数组转换为链表
			1. main：**切记用`delete`释放`new`的空间！**（在面试官已经提示的情况下仍然出错）
			2. 指针：更恰当的方式应当采用 RAII 智能指针！
			3. 结构体：`struct LinkNode* next`！；**初始化方式**有4种，最简单的为 `LinkNode* head = new LinkNode{NULL, 0}`
			2. 函数：**要抽象出通用功能！**别贪图方便复制无用代码！这是面试官的考察点！
			3. 链表：链表创建应当采用可复用和可循环的数组！
			3. 数组指针传参：数组指针会退化为普通指针，这时候要加一个数组长度参数：`len = sizeof(arr)/sizeof(int)`！
	4. 项目

2. 二面

	1. 编程题**（思路清楚逻辑清晰，一遍 coding 通过，而不是频繁修改已经敲进去的代码！！！）**：
		1. 实现 `char* strcpy(char* dest, char* src)`，不能调用库函数
		
				char * strcpy(char * strDest,const char * strSrc) ｛
					assert((strDest!=NULL) && (strSrc!=NULL));
					char *address = strDest;
					while ((*strDest++ = *strSrc++) != '\0');
					return address;
				｝
		2. 给定一个二叉树，找出所有有效路径中各节点**相加总和**等于给定 目标值 的路径。注：一个有效的路径，指的是从根节点到叶节点的路径
		1. 给一个链表，然后我们要把这个链表中第m个节点到第n个节点的部分翻转。设： 1->2->3->4->5->NULL, m = 2 and n = 4,返回： 1->4->3->2->5->NULL.注：1 ≤ m ≤ n ≤ length of list
	2. 项目经验
		1. raft：
			1. 这个项目主要是做什么，为什么要做这个
			2. 解释一下 raft 一致性协议
		2. 有没有别的关于比赛和论文的成果和学习到的东西可以讲讲：
		3. 用三个词总结一下你自己，以及举个具体例子体现出来：
		4. 讲一下这个网联式自动驾驶系统项目，以及你在这个项目里面承担什么发挥了什么作用：
			1. python 用在了什么地方
			2. ROS 是什么
			3. 服务端是用 java 写的对吧
	3. 基础
		1. 程序、进程和线程的区别
		2. 堆和栈的区别
		3. malloc 和 new 申请的内存在哪块地方
		3. 关于虚拟内存你知道什么

kika（后台开发）
---
1. 一面
	
	1. 架构**（先梳理清楚需求分析、功能定义，确定核心问题点和技术点，再去决定采用何种方法和架构）**
		1. 流式处理系统：
			1. 关于语音和文本之间的匹配搜集问题
			2. log 应该如何组织和记录
			2. 
		2. 语音标注系统：
			1. 问题：
				1. 语音标注系统是离线的，这个系统记录一些关于语料和文本的数据
				1. 客户端（网页）请求某个日期或者某个用户的语料数据和文本数据
				3. 客户端（网页）可以对这些语料数据和文本数据做一个判断，标注的内容是一段文本，表示正确的识别文本应该是什么，从而反馈出来哪些语料识别错误了
				4. **客户端（网页）可以是多人同时标注，并且需要网络失败问题**
				5. 数据量为几个T
			5. 分析：
				6. 首先，如何高效的查询数据，查询条件包括时间，标注人
				7. 其次修改数据，如何高效的修改数据中的存储，看是错误还是正确
				8. 另外，考虑到响应要快+大量数据，NoSQL中建议用KeyValue数据，redis不太合适，用Hbase是最理想的选择
				9. 然后查询的时候，如何用正确的数据之类的，在用hbase的时候，要考虑查询的维度与rowKey之间的设计方案
				10. rowKey: 语料Key, column = {UserId: {timeStamp: , data}}
		2. 会不会前端？
	2. 基础
		1. 父类有公有函数A和私有函数B，子类继承自父类，有公有函数C，通过子类访问函数A，会得到怎样的结果？访问函数B呢？
			1. 什么继承机制？公有继承还是私有继承还是保护继承？
		2. 虚函数和纯虚函数的区别
		3. 为什么父类的析构函数必须是虚函数
	4. 实习
		1. 你在百度具体负责什么内容
			1. 
		2. 是否了解整个系统架构
			1. 了解，但核心代码无法接触
		3. 为什么不留在百度
			1. 在百度由于权限问题所能接触到的业务和架构有限，每天只接触自己负责的一小部分
			2. 希望能够发挥自己的特长，并且学习不同的技术
			2. 想感受不同公司的文化氛围，体验一下大公司和创业公司之间是怎样的
		3. 在百度是有人带你吗
		4. 你想做工程还是做策略

2. 二面

	1. 编程题
		1. 实现 `int2str(int num)`
			1. `sprintf(buf, "%d", num)`
			2. **int的正数和负数表达范围不一致：-2^31~2^31-1**
			3. **`reverse()` 是 algorithm 库函数！**
	2. 实习
		1. 你在百度具体负责什么内容：
		2. 为什么选择kika：
			1. 首先我觉得kika的切入方向和目标用户在国内公司里来说是很特别的，包括说通过匹配用户输入意图来进行商业推广，以及以国外社交圈作为自己的扩展手段，我认为这些都是很好的，比较感兴趣
			2. 其次我希望能够在公司里发挥一个比当前岗位更大的作用，扩展自己的业务能力和技术能力

3. 三面：主管
	1. 你们部门主要方向和目标是什么？实习的主要内容是什么？
		1. 结构化商品信息，精确广告投放和匹配
		2. 物料质量控制
	2. 为什么这种乱绑定的物料会影响到广告投放性能指标？广告主是如何做到搜什么都能匹配到这个商品？
		1. 通配，无法做到精确的地域匹配和商品匹配
		2. 买大量的广告词
	2. 你有没有考虑过为什么要做这件事情，广告主他的确可以买很多词并且这在流程上是合法的，你们凭什么要对他们的商品进行下线处理？
		1. 我们会为广告主推荐一些关键词，但广告主不同意或者表示怀疑就会自买广告词，这时候我们会通过一个线上广告投放log分析出这些问题物料
		2. 我们并非强制对他们的物料进行下线处理，而是交由PM与他们进行协商
	3. 你们怎么说服广告主可以对他们的商品进行下线处理？
		1. 通过数据提供足够说服力，表明通过精确匹配可以降低他们的广告投放成本，并且提高点击率

4. 四面：CTO
	1. 讲一讲当前自动驾驶的技术路线
	2. 我看你做了关于激光雷达室内定位，你讲一讲当前室内定位的难点在哪
		1. 基于信号测距的室内定位：需要部署基站，需要自建地图
		2. 基于激光雷达等扫描匹配的室内定位：设备成本高，数据量大


滴滴（java后台开发）
---
1. 一面


2. 二面


3. 三面
